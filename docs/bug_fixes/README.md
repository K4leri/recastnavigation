# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ Zig-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ RecastNavigation

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –æ—à–∏–±–∫–∞–º –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ RecastNavigation, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –Ω–∞—à–µ–π Zig-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

## üìã –°–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|------|----------|--------|
| [#788](github_issues/ISSUE_788_Raycast_Buffer_Overflow.md) | Raycast Buffer Overflow Infinite Loop | `src/detour/query.zig` | –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±—É—Ñ–µ—Ä–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `raycast` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| [#793](github_issues/ISSUE_793_OverlapSlabs_Height_Threshold.md) | OverlapSlabs Height Threshold Bug | `src/detour/navmesh.zig` | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ—Ä–æ–≥ –≤—ã—Å–æ—Ç—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ–ª–∏–≥–æ–Ω–æ–≤ (4x –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ) | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| [üìÅ Hole Construction Fix](hole-construction-fix/) | Multiple Issues | `src/recast/` | –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ä—Å—Ç–∏–π | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| [üìÅ Raycast Fix](raycast-fix/) | Advanced Raycast | `src/detour/` | –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è raycast —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| [üìÅ Watershed 100% Fix](watershed-100-percent-fix/) | Watershed Algorithm | `src/recast/` | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ watershed –¥–ª—è 100% –ø–æ–∫—Ä—ã—Ç–∏—è | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

### üìä –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π

| –ü—Ä–æ–±–ª–µ–º–∞ | –î–æ–∫—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|----------|----------|--------|
| [Issue #783](potential_solutions/ISSUE_783_Solution_Options_Analysis.md) | –ê–Ω–∞–ª–∏–∑ 3 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–µ—à–µ–Ω–∏—è Contour Merge Logic | ‚úÖ –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ |

---

## üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### [Issue #788: Raycast Buffer Overflow Infinite Loop](github_issues/ISSUE_788_Raycast_Buffer_Overflow.md)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `raycast` –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±—É—Ñ–µ—Ä–∞ –ø—É—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ü–∏–∫–ª–∞ –ø—Ä–∏ `buffer_too_small`.

**–í–ª–∏—è–Ω–∏–µ:** –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "–∑–∞–≤–∏—Å–∞–Ω–∏–µ" –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ 100% –∑–∞–≥—Ä—É–∑–∫—É CPU.

---

### [Issue #793: OverlapSlabs Height Threshold Bug](github_issues/ISSUE_793_OverlapSlabs_Height_Threshold.md)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `py*2` –≤–º–µ—Å—Ç–æ `py` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `overlapSlabs`, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–ª–æ –ø–æ—Ä–æ–≥ –≤—ã—Å–æ—Ç—ã –≤ 4 —Ä–∞–∑–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–æ `py * py * 4.0` –Ω–∞ `py * py`.

**–í–ª–∏—è–Ω–∏–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –∞–≥–µ–Ω—Ç–∞.

---

### [üìÅ Hole Construction Fix](hole-construction-fix/)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ä—Å—Ç–∏–π –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—à–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –æ—Ç–≤–µ—Ä—Å—Ç–∏–π.

**–í–ª–∏—è–Ω–∏–µ:** –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—à–µ–π.

---

### [üìÅ Raycast Fix](raycast-fix/)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ raycast.

**–†–µ—à–µ–Ω–∏–µ:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.

**–í–ª–∏—è–Ω–∏–µ:** –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å raycast.

---

### [üìÅ Watershed 100% Fix](watershed-100-percent-fix/)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ watershed, –ø—Ä–∏–≤–æ–¥—è—â–∞—è –∫ –Ω–µ–ø–æ–ª–Ω–æ–º—É –ø–æ–∫—Ä—ã—Ç–∏—é.

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 100% –ø–æ–∫—Ä—ã—Ç–∏—è.

**–í–ª–∏—è–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –ø–æ–ª–Ω–æ—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—à–µ–π.

---

### [üìä Potential Solutions: Issue #783](potential_solutions/ISSUE_783_Solution_Options_Analysis.md)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `mergeRegionHoles`, –ø—Ä–∏–≤–æ–¥—è—â–∞—è –∫ –Ω–µ–ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –∫–æ–Ω—Ç—É—Ä–∞–º–∏.

**–ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π:** –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä 3 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–í–∞—Ä–∏–∞–Ω—Ç A:** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö holes (–ø—Ä–æ—Å—Ç–æ, –Ω–æ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- **–í–∞—Ä–∏–∞–Ω—Ç B:** –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–µ–¥—É—é—â–∏—Ö holes (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
- **–í–∞—Ä–∏–∞–Ω—Ç C:** –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ (—Å–ª–æ–∂–Ω–æ, –Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç B –¥–∞–µ—Ç 50% —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ 100% –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏.

**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω, –æ–∂–∏–¥–∞–µ—Ç—Å—è –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

- **–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 5 –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–æ–±–ª–µ–º:** 3 GitHub issues
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** 1
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** 21 –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç
- **–£–ª—É—á—à–µ–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ pathfinding:** ‚úÖ
- **–ü–æ–≤—ã—à–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã:** ‚úÖ
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º C++ –∫–æ–¥–æ–º:** ‚ö†Ô∏è

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Zig-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ù–∞—à–∞ Zig-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è RecastNavigation —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∏–ª–∏ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π C++ –≤–µ—Ä—Å–∏–∏:

1. **–ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
2. **–ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π pathfinding** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ–ª–∏–≥–æ–Ω–æ–≤
3. **–õ—É—á—à–µ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏–∑–∏–∫–µ** - –∞–≥–µ–Ω—Ç—ã –Ω–µ –≤—ã–±–∏—Ä–∞—é—Ç –Ω–µ–ø—Ä–æ—Ö–æ–¥–∏–º—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
4. **–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã –¥–æ –∏—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –≤ C++ –≤–µ—Ä—Å–∏–∏

## üîß –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–¥–æ–º —É—á–∏—Ç—ã–≤–∞–π—Ç–µ, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—ã–ª–∏ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–µ–Ω—ã –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º C++ –∫–æ–¥–æ–º –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö.

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```zig
// src/detour/query.zig - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ issue #788
if (status.buffer_too_small) {
    status.partial_result = true;
    break;  // –î–æ–±–∞–≤–ª–µ–Ω–æ —É—Å–ª–æ–≤–∏–µ –≤—ã—Ö–æ–¥–∞
}

// src/detour/navmesh.zig - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ issue #793
const thr = py * py;  // –ò–∑–º–µ–Ω–µ–Ω–æ —Å py * py * 4.0
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å API
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º